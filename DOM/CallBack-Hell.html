<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CallBacks Hell</title>
</head>

<body>
    <h2>Callback Hell & Pyramid of Doom</h2>


    <script>
        //     function loadScript(src, callback) {
        //     let script = document.createElement("script");
        //     script.src = src;
        //     script.onload = function() {
        //         console.log("Script loaded: " + src);
        //         callback(null,src); // Call the callback function when the script is loaded
        //     };
        //     script.onerror = function() {
        //         console.error("Failed to load script: " + src); // Log an error if the script fails to load
        //         callback(new Error("src got some error "))
        //     };
        //     document.body.appendChild(script);
        // }

        // function hello(error, src) {
        //     if(error)
        // {
        //     console.log(error)
        // }
        //     alert("Hello! Loaded: " + src);
        // }

        // function good(error, src) {
        //     if(error)
        // {
        //     console.log(error)
        //     sendEmergencyMessageToCeo();
        // }
        //     alert("Good! Loaded: " + src);
        // }

        // // Load Bootstrap JS and pass hello as the callback function
        // loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js", good);

        // there is an problem with callbakc we sned function has an argument with is not suitable becuse when i send function has an argument then we also send full control of function

        // pyramid of Doom

        function loadScript(src, callback) {
            let script = document.createElement("script");
            script.src = src;
            script.onload = function () {
                console.log("Script loaded: " + src);
                callback(null, src); // Call the callback function when the script is loaded
            };
            script.onerror = function () {
                console.error("Failed to load script: " + src); // Log an error if the script fails to load
                callback(new Error("src got some error "))
            };
            document.body.appendChild(script);
        }

        function hello(error, src) {
            if (error) {
                console.log(error)
            }
            alert("Hello! Loaded: " + src);
        }

        function good(error, src) {
            if (error) {
                console.log(error)
                sendEmergencyMessageToCeo();
            }
            alert("Good! Loaded: " + src);
        }

        // Load Bootstrap JS and pass hello as the callback function
        loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js", function (err, data) {
            if (error) {
                console.log(error)
                sendEmergencyMessageToCeo();
                return;
            }
            loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js", function (err, data) {
                if (error) {
                    console.log(error)
                    sendEmergencyMessageToCeo();
                    return;
                }
                loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js", function (err, data) {
                    if (error) {
                        console.log(error)
                        sendEmergencyMessageToCeo();
                        return;
                    }
                    loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js", function (err, data) {
                        if (error) {
                            console.log(error)
                            sendEmergencyMessageToCeo();
                            return;
                        }
                        loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js", function (err, data) {
                            if (error) {
                                console.log(error)
                                sendEmergencyMessageToCeo();
                                return;
                            }
                            loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js", function (err, data) {
                                if (error) {
                                    console.log(error)
                                    sendEmergencyMessageToCeo();
                                    return;
                                }
                                loadScript("https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js", function (err, data) {
                                    if (error) {
                                        console.log(error)
                                        sendEmergencyMessageToCeo();
                                        return;
                                    }
                                })
                            })
                        })
                    })
                })
            })
        });

        // when we have callback inside callback, the code gets diffcult to manage
        
    </script>
</body>

</html>